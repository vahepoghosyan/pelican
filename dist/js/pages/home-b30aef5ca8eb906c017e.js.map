{"version":3,"sources":["webpack:///./src/Pages/Home/Home.jsx"],"names":["Home","history","useHistory","loader","errorMessage","wallet","successActivateMessage","successWithdrawalMessage","post","getWallet","update","updateUser","useGlobal","localWalletDataFirst","setLocalWalletDataFirst","useState","localWalletDataSecond","setLocalWalletDataSecond","seeMoreFlagFirst","setSeeMoreFlagFirst","seeMoreFlagSecond","setSeeMoreFlagSecond","monthlyGoal","setMonthlyGoal","useEffect","temptoken","localStorage","getItem","api_key","userId","walletData","userData","monthly_goal","handlePay","service","event","push","pathname","state","className","animation","variant","md","balance","map","index","show_in_balance_page_default","Item","key","xs","name","percent_covered","monthly_credits","now","disabled","onClick","placeholder","value","onChange","target","replace","Append","then","res","percent_covered_projection"],"mappings":"qOAQA,SAASA,IACR,MAAMC,EAAUC,gBAGf,OAAEC,EAAF,aAAUC,EAAV,OAAwBC,EAAxB,uBAAgCC,EAAhC,yBAAwDC,IAEvDC,MAAM,UAAEC,GACRC,QAAQ,WAAEC,KAERC,eAEGC,EAAsBC,GAA2BC,mBAAS,KAC1DC,EAAuBC,GAA4BF,mBAAS,KAE5DG,EAAkBC,GAAuBJ,oBAAS,IAClDK,EAAmBC,GAAwBN,oBAAS,IAEpDO,EAAaC,GAAkBR,mBAAS,IAE/CS,oBAAU,KACTf,EACC,CACCgB,UAAWC,aAAaC,QAAQ,aAChCC,QAASF,aAAaC,QAAQ,WAC9BE,OAAQH,aAAaC,QAAQ,YAE9B1B,IAEC,IAEHuB,oBAAU,KACLnB,IACHS,EAAwBT,EAAOyB,YAC/Bb,EAAyBZ,EAAOyB,YAChCP,EAAelB,EAAO0B,SAASC,gBAE9B,CAAC3B,IAEJ,MAAM4B,EAAYC,GAAWC,IAC5BlC,EAAQmC,KAAK,CAAEC,SAAU,sBAAuBC,MAAO,CAAEJ,cA4C1D,OAAI/B,EAEF,yBAAKoC,UAAU,sEACd,kBAAC,IAAD,CAASC,UAAU,SAASC,QAAQ,aAMtC,kBAAC,IAAD,CAAKC,GAAI,GACR,wBAAIH,UAAU,oBAAd,kBAECnC,GAAgB,kBAAC,IAAD,CAAOqC,QAAQ,UAAUrC,GACzCE,GAA0B,kBAAC,IAAD,CAAOmC,QAAQ,WAAWnC,GACpDC,GAA4B,kBAAC,IAAD,CAAOkC,QAAQ,WAAWlC,GAEvD,wBAAIgC,UAAU,qCAAd,oBACkB,0BAAMA,UAAU,gBAAgBlC,GAAUA,EAAO0B,SAASY,QAA1D,MAGlB,uBAAGJ,UAAU,eAAb,oFAGA,kBAAC,IAAD,CAAWE,QAAQ,QAAQF,UAAWrB,EAAmB,OAAS,QAChEb,GACAQ,EAAqB+B,IAAI,CAACV,EAASW,KAC1BX,EAAQY,6BACf,kBAAC,IAAUC,KAAX,CACCR,UAAU,2DACVS,IAAKH,GACL,kBAAC,IAAD,CAAKI,GAAI,GACR,+BAAQf,EAAQgB,MAChB,wBAAIX,UAAU,qCAAqCL,EAAQiB,gBAA3D,MAED,kBAAC,IAAD,CAAKF,GAAI,EAAGV,UAAU,eACrB,+BAAQL,EAAQkB,gBAAhB,iBACA,kBAAC,IAAD,CAAaX,QAAQ,UAAUY,IAAKnB,EAAQiB,mBAE7C,kBAAC,IAAD,CAAKF,GAAI,EAAGV,UAAU,cACrB,kBAAC,IAAD,CACCE,QAAQ,UACRa,YAAapB,EAAQoB,SACrBC,SAAYrB,EAAQoB,SAAW,OAAWrB,EAAUC,IAHrD,YASF,KAIHhB,GACA,yBAAKqB,UAAU,oBACd,kBAAC,IAAD,CAAQE,QAAQ,kBAAkBc,QA/FVpB,IAC3BrB,EACCD,EAAqB+B,IAAIV,IACjB,IAAKA,EAAS,6BAAkC,QAGzDf,GAAoB,KAyFjB,kBAKF,uBAAGoB,UAAU,eAAb,4EACA,kBAAC,IAAD,CAAKA,UAAU,0BACd,kBAAC,IAAD,CAAKU,GAAI,GACR,kBAAC,IAAD,CAAYV,UAAU,QACrB,kBAAC,IAAD,CACCiB,YAAY,iBACZC,MAAOnC,EACPoC,SAzF0B,EAAGC,aAClC,IAAI,MAAEF,GAAUE,EAEhBF,EAAQA,EAAMG,QAAQ,SAAU,IAEhCrC,EAAekC,MAsFX,kBAAC,IAAWI,OAAZ,KACC,kBAAC,IAAD,CAAQP,SAA0B,KAAhBhC,EAAoBiC,QApFd,KAC7B5C,EAAW,CACVqB,aAAcV,IACZwC,KAAKC,GACPtD,EACC,CACCgB,UAAWC,aAAaC,QAAQ,aAChCC,QAASF,aAAaC,QAAQ,WAC9BE,OAAQH,aAAaC,QAAQ,YAE9B1B,MA0EG,6BAOJ,kBAAC,IAAD,CAAWwC,QAAQ,SACjBpC,GACAW,EAAsB4B,IAAI,CAACV,EAASW,KAC3BX,EAAQY,6BACf,kBAAC,IAAUC,KAAX,CACCR,UAAU,2DACVS,IAAKH,GACL,kBAAC,IAAD,CAAKI,GAAI,GACR,+BAAQf,EAAQgB,MAChB,wBAAIX,UAAU,qCACZL,EAAQ8B,2BADV,MAID,kBAAC,IAAD,CAAKf,GAAI,EAAGV,UAAU,eACrB,+BAAQL,EAAQkB,gBAAhB,iBACA,kBAAC,IAAD,CAAaX,QAAQ,UAAUY,IAAKnB,EAAQ8B,8BAE7C,kBAAC,IAAD,CAAKf,GAAI,EAAGV,UAAU,cACrB,kBAAC,IAAD,CAAQe,YAAapB,EAAQoB,SAAUb,QAAQ,WAA/C,YAMF,KAIHrB,GACA,yBAAKmB,UAAU,oBACd,kBAAC,IAAD,CAAQE,QAAQ,kBAAkBc,QA1IT,KAC5BtC,EACCD,EAAsB4B,IAAIV,IAClB,IAAKA,EAAS,6BAAkC,QAGzDb,GAAqB,KAoIlB,oB,kMA7LIrB,E,0gBACQE,IAQZU,M,QA6LUZ,E,QAAA,a,6FAtMNA,E","file":"js/pages/home-b30aef5ca8eb906c017e.js","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { Alert, Button, ListGroup, ProgressBar, Col, InputGroup, FormControl, Row, Spinner } from 'react-bootstrap';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { useGlobal } from '../../store';\n\nfunction Home() {\n\tconst history = useHistory();\n\n\tconst [\n\t\t{ loader, errorMessage, wallet, successActivateMessage, successWithdrawalMessage },\n\t\t{\n\t\t\tpost: { getWallet },\n\t\t\tupdate: { updateUser }\n\t\t}\n\t] = useGlobal();\n\n\tconst [localWalletDataFirst, setLocalWalletDataFirst] = useState([]);\n\tconst [localWalletDataSecond, setLocalWalletDataSecond] = useState([]);\n\n\tconst [seeMoreFlagFirst, setSeeMoreFlagFirst] = useState(true);\n\tconst [seeMoreFlagSecond, setSeeMoreFlagSecond] = useState(true);\n\n\tconst [monthlyGoal, setMonthlyGoal] = useState('');\n\n\tuseEffect(() => {\n\t\tgetWallet(\n\t\t\t{\n\t\t\t\ttemptoken: localStorage.getItem('temptoken'),\n\t\t\t\tapi_key: localStorage.getItem('api_key'),\n\t\t\t\tuserId: localStorage.getItem('user_id')\n\t\t\t},\n\t\t\thistory\n\t\t);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (wallet) {\n\t\t\tsetLocalWalletDataFirst(wallet.walletData);\n\t\t\tsetLocalWalletDataSecond(wallet.walletData);\n\t\t\tsetMonthlyGoal(wallet.userData.monthly_goal);\n\t\t}\n\t}, [wallet]);\n\n\tconst handlePay = service => event => {\n\t\thistory.push({ pathname: 'frontend/withdrawal', state: { service } });\n\t};\n\n\tconst handleShowMoreFirst = event => {\n\t\tsetLocalWalletDataFirst(\n\t\t\tlocalWalletDataFirst.map(service => {\n\t\t\t\treturn { ...service, ['show_in_balance_page_default']: '1' };\n\t\t\t})\n\t\t);\n\t\tsetSeeMoreFlagFirst(false);\n\t};\n\n\tconst handleShowMoreSecond = () => {\n\t\tsetLocalWalletDataSecond(\n\t\t\tlocalWalletDataSecond.map(service => {\n\t\t\t\treturn { ...service, ['show_in_balance_page_default']: '1' };\n\t\t\t})\n\t\t);\n\t\tsetSeeMoreFlagSecond(false);\n\t};\n\n\tconst handleMonthlyGoalChange = ({ target }) => {\n\t\tlet { value } = target;\n\n\t\tvalue = value.replace(/[^\\d]/g, '');\n\n\t\tsetMonthlyGoal(value);\n\t};\n\n\tconst handleSaveMonthlyGoal = () => {\n\t\tupdateUser({\n\t\t\tmonthly_goal: monthlyGoal\n\t\t}).then(res =>\n\t\t\tgetWallet(\n\t\t\t\t{\n\t\t\t\t\ttemptoken: localStorage.getItem('temptoken'),\n\t\t\t\t\tapi_key: localStorage.getItem('api_key'),\n\t\t\t\t\tuserId: localStorage.getItem('user_id')\n\t\t\t\t},\n\t\t\t\thistory\n\t\t\t)\n\t\t);\n\t};\n\n\tif (loader) {\n\t\treturn (\n\t\t\t<div className=\"d-flex justify-content-center align-items-center pt-5 pb-5 spinner\">\n\t\t\t\t<Spinner animation=\"border\" variant=\"primary\" />\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Col md={8}>\n\t\t\t<h3 className=\"text-center mb-3\">Իմ դրամապանակը</h3>\n\n\t\t\t{errorMessage && <Alert variant=\"danger\">{errorMessage}</Alert>}\n\t\t\t{successActivateMessage && <Alert variant=\"success\">{successActivateMessage}</Alert>}\n\t\t\t{successWithdrawalMessage && <Alert variant=\"success\">{successWithdrawalMessage}</Alert>}\n\n\t\t\t<h6 className=\"font-weight-bold text-center mb-3\">\n\t\t\t\tԱյս պահին Հաշիվը <span className=\"text-primary\">{wallet && wallet.userData.balance}֏</span>\n\t\t\t</h6>\n\n\t\t\t<p className=\"text-center\">\n\t\t\t\tՄեր օգտատերերի ամսեկան ծախսերի միջին տվյալների հիման վրա սա թույլ կտա վճարել Ձեր\n\t\t\t</p>\n\t\t\t<ListGroup variant=\"flush\" className={seeMoreFlagFirst ? 'mb-3' : 'mb-5'}>\n\t\t\t\t{wallet &&\n\t\t\t\t\tlocalWalletDataFirst.map((service, index) => {\n\t\t\t\t\t\treturn +service.show_in_balance_page_default ? (\n\t\t\t\t\t\t\t<ListGroup.Item\n\t\t\t\t\t\t\t\tclassName=\"d-flex justify-content-between align-items-end pt-4 pb-4\"\n\t\t\t\t\t\t\t\tkey={index}>\n\t\t\t\t\t\t\t\t<Col xs={2}>\n\t\t\t\t\t\t\t\t\t<small>{service.name}</small>\n\t\t\t\t\t\t\t\t\t<h5 className=\"m-0 font-weight-bold text-primary\">{service.percent_covered}%</h5>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col xs={8} className=\"text-center\">\n\t\t\t\t\t\t\t\t\t<small>{service.monthly_credits} դրամի հաշվով</small>\n\t\t\t\t\t\t\t\t\t<ProgressBar variant=\"success\" now={service.percent_covered} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col xs={2} className=\"text-right\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\t\tdisabled={!!+service.disabled}\n\t\t\t\t\t\t\t\t\t\tonClick={!!+service.disabled ? () => {} : handlePay(service)}>\n\t\t\t\t\t\t\t\t\t\tՎճարել\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</ListGroup>\n\t\t\t{seeMoreFlagFirst && (\n\t\t\t\t<div className=\"text-center mb-5\">\n\t\t\t\t\t<Button variant=\"outline-primary\" onClick={handleShowMoreFirst}>\n\t\t\t\t\t\tՏեսնել ավելին\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<p className=\"text-center\">Եթե այս տեմպով օգտվեք ապա օգտվելու սկզբից մեկ ամիսլրանալու պահին կունենք</p>\n\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t<Col xs={7}>\n\t\t\t\t\t<InputGroup className=\"mb-3\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tplaceholder=\"Ամսական նպատակ\"\n\t\t\t\t\t\t\tvalue={monthlyGoal}\n\t\t\t\t\t\t\tonChange={handleMonthlyGoalChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t\t<Button disabled={monthlyGoal === ''} onClick={handleSaveMonthlyGoal}>\n\t\t\t\t\t\t\t\tՍահմանել ամսվա նպատակ\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t\t</InputGroup>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<ListGroup variant=\"flush\">\n\t\t\t\t{wallet && // TODO when fields disabled\n\t\t\t\t\tlocalWalletDataSecond.map((service, index) => {\n\t\t\t\t\t\treturn +service.show_in_balance_page_default ? (\n\t\t\t\t\t\t\t<ListGroup.Item\n\t\t\t\t\t\t\t\tclassName=\"d-flex justify-content-between align-items-end pt-4 pb-4\"\n\t\t\t\t\t\t\t\tkey={index}>\n\t\t\t\t\t\t\t\t<Col xs={2}>\n\t\t\t\t\t\t\t\t\t<small>{service.name}</small>\n\t\t\t\t\t\t\t\t\t<h5 className=\"m-0 font-weight-bold text-primary\">\n\t\t\t\t\t\t\t\t\t\t{service.percent_covered_projection}%\n\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col xs={8} className=\"text-center\">\n\t\t\t\t\t\t\t\t\t<small>{service.monthly_credits} դրամի հաշվով</small>\n\t\t\t\t\t\t\t\t\t<ProgressBar variant=\"success\" now={service.percent_covered_projection} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col xs={2} className=\"text-right\">\n\t\t\t\t\t\t\t\t\t<Button disabled={!!+service.disabled} variant=\"primary\">\n\t\t\t\t\t\t\t\t\t\tՎճարել\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</ListGroup>\n\t\t\t{seeMoreFlagSecond && (\n\t\t\t\t<div className=\"text-center mb-5\">\n\t\t\t\t\t<Button variant=\"outline-primary\" onClick={handleShowMoreSecond}>\n\t\t\t\t\t\tՏեսնել ավելին\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Col>\n\t);\n}\n\nexport default Home;\n"],"sourceRoot":""}